// @ts-nocheck
function showMiniToast(t="üõçÔ∏è",e=null){let o=document.querySelector(".mini-toast");if(o||(o=document.createElement("div"),o.className="mini-toast",o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),document.body.appendChild(o)),o.textContent=t,e&&e.getBoundingClientRect){const t=e.getBoundingClientRect();o.style.position="fixed",o.style.left=t.left+t.width/2+"px",o.style.top=t.top-36+"px",o.style.transform="translateX(-50%)"}else o.style.position="fixed",o.style.left="50%",o.style.bottom="72px",o.style.transform="translateX(-50%)",o.style.top="";o.style.opacity="1",o.style.pointerEvents="none",o._hideTimeout&&clearTimeout(o._hideTimeout),o._hideTimeout=setTimeout((()=>{o.style.opacity="0",o._hideTimeout2=setTimeout((()=>{o&&o.parentNode&&(o.style.left="",o.style.top="",o.style.bottom="")}),220)}),900)}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".product").forEach((t=>{t.addEventListener("click",(()=>{const e=t.dataset.id;if(!e)return;const o=/matcha|^drink-/i.test(e);window.location.href=o?`drsi.html?id=${encodeURIComponent(e)}`:`dsri.html?id=${encodeURIComponent(e)}`}))}));const t=document.querySelector(".visit .grid");if(!t)return;const e="1"===new URLSearchParams(window.location.search).get("admin"),o="verent_booths_v1";function n(){try{const t=localStorage.getItem(o);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to parse booths data",t),null}}function r(t){try{localStorage.setItem(o,JSON.stringify(t))}catch(t){console.error("Failed to save booths",t)}}function i(){return Array.from(t.querySelectorAll(".chip")).map((t=>({title:(t.querySelector(".chip-title")||{}).textContent||"",small:(t.querySelector(".small")||{}).textContent||""})))}function l(e){const o=Array.from(t.querySelectorAll(".chip"));e.forEach(((e,n)=>{let r=o[n];r||(r=document.createElement("div"),r.className="chip",r.innerHTML='<div class="chip-title"></div><div class="small"></div>',t.appendChild(r));const i=r.querySelector(".chip-title"),l=r.querySelector(".small");i&&(i.textContent=e.title),l&&(l.textContent=e.small)}))}const s=n();if(s&&Array.isArray(s)&&s.length&&l(s),!e)return;const a=document.createElement("div");a.className="admin-booth-bar",a.style.cssText="display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-bottom:8px;",a.innerHTML='\n    <button type="button" class="btn-edit-booths">Edit Booths</button>\n    <button type="button" class="btn-save-booths" style="display:none;">Save</button>\n    <button type="button" class="btn-export-booths">Export</button>\n    <button type="button" class="btn-import-booths">Import</button>\n    <input type="file" accept="application/json" style="display:none;" class="btn-import-file">\n  ',t.parentNode.insertBefore(a,t);const c=a.querySelector(".btn-edit-booths"),d=a.querySelector(".btn-save-booths"),u=a.querySelector(".btn-export-booths"),b=a.querySelector(".btn-import-booths"),p=a.querySelector(".btn-import-file");let m=!1;function y(e=!1){if(m=!1,c.style.display="inline-block",d.style.display="none",t.querySelectorAll(".chip").forEach((t=>{const e=t.querySelector(".chip-title"),o=t.querySelector(".small");e&&(e.removeAttribute("contenteditable"),e.classList.remove("editable")),o&&(o.removeAttribute("contenteditable"),o.classList.remove("editable")),t.style.outline="",t.style.padding=""})),e){r(i()),d.textContent="Saved ‚úì",setTimeout((()=>d.textContent="Save"),1200)}}c.addEventListener("click",(()=>function(){m=!0,c.style.display="none",d.style.display="inline-block",t.querySelectorAll(".chip").forEach((t=>{const e=t.querySelector(".chip-title"),o=t.querySelector(".small");e&&(e.setAttribute("contenteditable","true"),e.setAttribute("aria-label","Edit booth title"),e.classList.add("editable")),o&&(o.setAttribute("contenteditable","true"),o.setAttribute("aria-label","Edit booth time"),o.classList.add("editable")),t.style.outline="2px dashed rgba(0,150,80,0.12)",t.style.padding="10px"}));const e=t.querySelector(".chip .chip-title");e&&e.focus()}())),d.addEventListener("click",(()=>y(!0))),u.addEventListener("click",(()=>{const t=i(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),o=URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download="booths.json",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(o)})),b.addEventListener("click",(()=>p.click())),p.addEventListener("change",(t=>{const e=t.target.files&&t.target.files[0];if(!e)return;const o=new FileReader;o.onload=t=>{try{const e=JSON.parse(t.target.result);if(!Array.isArray(e))throw new Error("Invalid format: expected array");l(e),r(e),alert("Imported and saved booths.")}catch(t){alert("Failed to import: "+t.message)}},o.readAsText(e)})),document.addEventListener("keydown",(t=>{if(m&&"Escape"===t.key){const t=n();t&&t.length&&l(t),y(!1)}}));const h=document.createElement("style");function f(){try{const t=localStorage.getItem("verent_booths_v1");if(!t)return;const e=JSON.parse(t),o=document.querySelector(".visit .grid");if(!o)return;o.innerHTML="",e.slice(0,4).forEach((t=>{const e=document.createElement("div");e.className="chip",e.innerHTML=`<div class="chip-title">${t.title||""}</div><div class="small">${t.small||""}</div>`,o.appendChild(e)}))}catch(t){console.warn("Failed to reload booths",t)}}function f(){try{const t=localStorage.getItem("verent_booths_v1");if(console.log("UTAMA: raw localStorage for verent_booths_v1 ->",t),!t)return;const e=JSON.parse(t);console.log("UTAMA: parsed booths ->",e)}catch(t){console.error("UTAMA: failed to read booths",t)}}h.innerHTML="\n    .chip .editable:focus {\n      outline: none;\n      box-shadow: 0 0 0 3px rgba(0,150,80,0.12);\n      border-radius: 6px;\n    }\n    .admin-booth-bar .btn-edit-booths,\n    .admin-booth-bar .btn-save-booths,\n    .admin-booth-bar .btn-export-booths,\n    .admin-booth-bar .btn-import-booths {\n      background: #ffffff;\n      border: 1px solid #e6e6e6;\n      padding: 6px 10px;\n      border-radius: 8px;\n      cursor: pointer;\n      font-size: 13px;\n    }\n    .admin-booth-bar .btn-save-booths { background: #e8fff3; border-color: rgba(0,150,80,0.12); }\n  ",document.head.appendChild(h),window.addEventListener("storage",(t=>{"verent_booths_v1"===t.key&&f()})),window.addEventListener("focus",(()=>f())),document.addEventListener("DOMContentLoaded",(()=>f())),window.addEventListener("storage",(t=>{"verent_booths_v1"===t.key&&(console.log("UTAMA: storage event fired",t),f())})),document.addEventListener("DOMContentLoaded",(()=>f()))})),document.querySelectorAll(".product").forEach((t=>{t.addEventListener("click",(()=>{const e=t.dataset.id;e&&(window.location.href=`drsi.html?id=${e}`)}))})),document.querySelectorAll(".product .buy-pill").forEach((t=>{t.addEventListener("click",(function(e){e.stopPropagation();const o=t.closest(".product");if(!o)return;const n=o.dataset.id||o.querySelector(".title")?.textContent?.trim()||"",r=o.querySelector(".title")?.textContent?.trim()||"",i=o.querySelector("img")?.getAttribute("src")||"",l=o.querySelector(".price-row")?.textContent||"",s=Number((l||"").replace(/[^\d]/g,""))||0;const a=function(){try{return JSON.parse(localStorage.getItem("cart")||"[]")}catch(t){return[]}}(),c=a.find((t=>t.id===n&&(!t.addons||0===t.addons.length)));var d;c?(c.qty=Number(c.qty||1)+1,c.subtotal=Number(c.subtotal||0)+s):a.push({id:n,title:r,image:i,qty:1,addons:[],unitPrice:s,subtotal:s}),d=a,localStorage.setItem("cart",JSON.stringify(d||[])),showMiniToast("üõçÔ∏è",t)}))}));