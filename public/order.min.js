// @ts-nocheck
!function(){"use strict";function t(t){return"Rp "+new Intl.NumberFormat("id-ID").format(Number(t||0))}function e(t){return String(t||"").replace(/[&<>"']/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])))}function n(){return function(t){try{return JSON.parse(localStorage.getItem(t)||"[]")}catch(t){return[]}}("orders")}function i(t){const n=t.items&&t.items[0],i=Math.max(0,(t.items||[]).length-1),d=n?function(t){const e=String(t?.id||"").toLowerCase(),n=String(t?.title||"").toLowerCase();return e.startsWith("dsri")||e.startsWith("dessert")||n.includes("dessert")?"Desserts":e.startsWith("drsi")||e.startsWith("drink")||n.includes("latte")||n.includes("drink")?"Drinks":"Products"}(n):"Products",a=n&&n.image?'<img src="'+e(n.image)+'" alt="'+e(n.title)+'" style="width:68px;height:68px;object-fit:cover;border-radius:8px">':'<div class="thumb"></div>',s=t.status||"active",o=new Date(t.createdAt||Date.now()).toLocaleString(),c=document.createElement("article");return c.className="order-card",c.innerHTML='      <div class="thumb">'+a+'</div>      <div class="order-info">        <div class="order-top">          <h3 class="product-title">'+e(n?n.title:"No title")+'</h3>          <span class="more">'+(i>0?"+"+i+" More":"")+'</span>        </div>        <p class="brand">'+e(d)+'</p>        <div class="status-row">          <span class="status">Status : <strong>'+e(s)+'</strong></span>          <span class="eta">Created : <em>'+e(o)+'</em></span>        </div>        <div class="order-actions">          <button class="btn-outline" data-order-id="'+e(t.id)+'">Track Order</button>          <button class="btn-light view-details" data-order-id="'+e(t.id)+'">View Details</button>        </div>      </div>',c.querySelectorAll(".view-details").forEach((t=>{t.addEventListener("click",(function(){r(this.dataset.orderId)}))})),c}function r(i){const r=(n()||[]).find((t=>String(t.id)===String(i))),a=["tab-active","tab-schedule","tab-scheduled","tab-history"];let s=null;for(const t of a){const e=document.getElementById(t);if(e){s=e;break}}if(!s)return;if(s.innerHTML="",!r)return void(s.innerHTML='<div style="padding:12px;color:#c33">Order tidak ditemukan.</div>');const o=document.createElement("h2");o.textContent="Order Details",s.appendChild(o);const c=document.createElement("div");c.style.marginTop="12px",(r.items||[]).forEach((n=>{const i=document.createElement("div");i.style.padding="10px 0",i.innerHTML='        <div style="display:flex;gap:12px;align-items:center">          <div style="width:56px;height:56px;border-radius:8px;overflow:hidden;background:#f5f5f7;flex:0 0 56px">            '+(n.image?'<img src="'+e(n.image)+'" style="width:100%;height:100%;object-fit:cover">':"")+'          </div>          <div style="flex:1">            <div style="font-weight:700">'+e(n.title)+"</div>            "+(n.addons&&n.addons.length?'<div style="color:#666;margin-top:6px">'+n.addons.map((t=>e(t.label))).join(", ")+"</div>":"")+'            <div style="color:#666;margin-top:6px">'+(n.qty||0)+" Ã— "+t(n.unitPrice)+" = "+t(n.subtotal)+"</div>          </div>        </div>",c.appendChild(i)})),s.appendChild(c);const l=document.createElement("div");l.style.marginTop="12px",l.style.fontWeight="700",l.textContent="Total: "+t(r.total),s.appendChild(l);const u=document.createElement("div");u.style.marginTop="12px",u.innerHTML='<button class="btn-light" id="back-to-summary">Back to summary</button>',s.appendChild(u),u.querySelector("#back-to-summary").addEventListener("click",(function(){d()}))}function d(){!function(){const t=document.getElementById("tab-active");if(!t)return;t.innerHTML="";const e=n();if(!e||!e.length)return void(t.innerHTML='<div style="padding:16px;color:#666">Belum ada pesanan.</div>');const r=(e||[]).find((t=>"active"===String(t.status||"").toLowerCase()));r?t.appendChild(i(r)):t.innerHTML='<div style="padding:16px;color:#666">Tidak ada pesanan aktif saat ini.</div>'}(),function(){const t=document.getElementById("tab-schedule")||document.getElementById("tab-scheduled");if(!t)return;t.innerHTML="";const e=(n()||[]).filter((t=>t.status&&"scheduled"===String(t.status).toLowerCase()||t.scheduledAt));e.length?e.forEach((e=>t.appendChild(i(e)))):t.innerHTML='<div style="padding:16px;color:#666">No scheduled orders.</div>'}(),function(){const t=document.getElementById("tab-history");if(!t)return;t.innerHTML="";const e=n(),r=(e||[]).filter((t=>{const e=String(t.status||"").toLowerCase();return"active"!==e&&"scheduled"!==e&&""!==e}));if(!r.length){const n=(e||[]).filter((t=>{try{return Date.now()-Number(t.createdAt||0)>864e5}catch(t){return!1}}));return n.length?void n.forEach((e=>t.appendChild(i(e)))):void(t.innerHTML='<div style="padding:16px;color:#666">History kosong.</div>')}r.forEach((e=>t.appendChild(i(e))))}()}document.addEventListener("DOMContentLoaded",(function(){try{d(),document.querySelectorAll("[data-order-tab],[data-tab]").forEach((t=>{t.addEventListener("click",(function(t){const e=this.dataset.orderTab||this.dataset.tab;if(!e)return;const n={active:"tab-active",scheduled:"tab-scheduled",schedule:"tab-schedule",history:"tab-history"}[e]||e;["tab-active","tab-scheduled","tab-schedule","tab-history"].forEach((t=>{const e=document.getElementById(t);e&&(e.style.display=t===n?"":"none")})),document.querySelectorAll("[data-order-tab],[data-tab]").forEach((t=>{const n=(t.dataset.orderTab||t.dataset.tab)===e;t.classList.toggle("tab-active",n),t.setAttribute("aria-selected",n?"true":"false")}))}))}))}catch(t){console.error("order render error",t)}})),window.renderAllOrders=d,window.renderOrderDetails=r}();