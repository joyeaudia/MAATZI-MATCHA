// @ts-nocheck
!function(){"use strict";function t(t){try{return JSON.parse(localStorage.getItem(t)||"[]")}catch(t){return[]}}function e(t){try{localStorage.setItem("orders",JSON.stringify(t||[]))}catch(t){console.error("Failed to save orders",t)}}function n(t){return String(t||"").replace(/[&<>"']/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])))}function a(){return t("orders")}function d(){const i=document.getElementById("admin-content");if(!i)return;i.innerHTML="";const s=a();s.length?s.slice().reverse().forEach((s=>{i.appendChild(function(i){const s=document.createElement("article");s.className="admin-order-card";const r=new Date(i.createdAt||Date.now()).toLocaleString(),c=(i.status||"active").toLowerCase(),o=(i.paymentStatus||"pending").toLowerCase(),l=t("savedAddresses_v1");let u=null;Array.isArray(l)&&l.length&&(u=l.find((t=>t&&t.isDefault))||l[0]);let m="";if(u){const t=n(u.label||""),e=n(u.name||""),a=n(u.phone||"");m=`\n        <div class="admin-address">\n          <div class="admin-address-title">Address</div>\n          <div class="admin-address-main">\n            <div>${`${t||""}${t&&e?" - ":""}${e||""}`}</div>\n            ${a?`<div>${a}</div>`:""}\n            <div>${n(u.address||"").replace(/\n/g,"<br>")}</div>\n          </div>\n        </div>\n      `}const v=i.items&&i.items[0],p=Math.max(0,(i.items||[]).length-1),g=v?n(v.title):"No title",b="paid"===o?"badge-payment paid":"rejected"===o?"badge-payment rejected":"badge-payment";s.innerHTML=`\n      <div class="admin-order-header">\n        <div class="admin-order-id">Order ID: ${n(i.id||"(no id)")}</div>\n        <div class="admin-order-created">${n(r)}</div>\n      </div>\n\n      <div class="admin-status-row">\n        <span class="badge badge-status">Status: ${n(c)}</span>\n        <span class="badge ${b}">Payment: ${n(o)}</span>\n        <span class="badge">Total: ${f=i.total,"Rp "+new Intl.NumberFormat("id-ID").format(Number(f||0))}</span>\n      </div>\n\n      <div class="admin-items">\n        <div>${g}${p>0?" +"+p+" more":""}</div>\n      </div>\n\n      ${m}\n\n      <div class="admin-actions">\n        <button class="btn btn-approve" data-id="${n(i.id)}">ACC (sudah dibayar)</button>\n        <button class="btn btn-reject" data-id="${n(i.id)}">Tolak order</button>\n      </div>\n    `;var f;const $=s.querySelector(".btn-approve"),y=s.querySelector(".btn-reject");$&&$.addEventListener("click",(function(){const t=this.dataset.id,n=a(),i=n.findIndex((e=>String(e.id)===String(t)));-1!==i&&(n[i].paymentStatus="paid",n[i].status||(n[i].status="active"),e(n),d(),alert("Order di-set sebagai SUDAH DIBAYAR."))}));y&&y.addEventListener("click",(function(){const t=this.dataset.id,n=a(),i=n.findIndex((e=>String(e.id)===String(t)));-1!==i&&(n[i].paymentStatus="rejected",n[i].status="cancelled",e(n),d(),alert("Order telah DITOLAK / dibatalkan."))}));return s}(s))})):i.innerHTML='<div style="color:#777;font-size:13px;">Belum ada order.</div>'}document.addEventListener("DOMContentLoaded",d)}();