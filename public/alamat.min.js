// @ts-nocheck
document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("form"),t="savedAddresses_v1";e.addEventListener("submit",(function(e){e.preventDefault();const a=(document.getElementById("address-label")?.value||"").trim()||"Other",n=(document.getElementById("recipient-name")?.value||"").trim(),r=(document.getElementById("phone-number")?.value||"").trim(),o=(document.getElementById("street-address")?.value||"").trim(),l=(document.getElementById("city")?.value||"").trim(),c=(document.getElementById("province")?.value||"").trim(),d=(document.getElementById("postal-code")?.value||"").trim(),i=document.getElementById("default-address"),m=!(!i||!i.checked);if(!n||!r||!o)return void alert("Isi Nama, No. Telepon, dan Alamat jalan minimal.");const s=`${o}\n${l}${l&&c?", ":""}${c}\n${d}`,u={label:a,name:n,phone:r,address:s,isDefault:!!m},f=function(){try{const e=localStorage.getItem(t);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a:[]}catch(e){return[]}}();if(f.length>=5)return void alert("Maksimum 5 alamat saja. Hapus salah satu jika ingin menambah lagi.");u.isDefault&&f.forEach((e=>e.isDefault=!1)),f.push(u),function(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){console.error("Failed to write addresses to localStorage",e)}}(f);const h=`${n}\n${r}\n${s}`;if("checkout"===new URLSearchParams(window.location.search).get("from")){try{localStorage.setItem("checkoutRecipientDraft_v1",h)}catch(e){}window.location.href="cekout.html"}else window.location.href="drafamt.html"}))}));