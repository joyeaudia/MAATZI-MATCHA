// @ts-nocheck
document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("form"),t="savedAddresses_v1";e.addEventListener("submit",(function(e){e.preventDefault();const a=(document.getElementById("address-label")?.value||"").trim()||"Other",n=(document.getElementById("recipient-name")?.value||"").trim(),r=(document.getElementById("phone-number")?.value||"").trim(),o=(document.getElementById("street-address")?.value||"").trim(),l=(document.getElementById("city")?.value||"").trim(),c=(document.getElementById("province")?.value||"").trim(),m=(document.getElementById("postal-code")?.value||"").trim(),d=document.getElementById("default-address"),i=!(!d||!d.checked);if(!n||!r||!o)return void alert("Isi Nama, No. Telepon, dan Alamat jalan minimal.");const s=`${o}\n${l}${l&&c?", ":""}${c}\n${m}`,u={label:a,name:n,phone:r,address:s,isDefault:!!i},h=function(){try{const e=localStorage.getItem(t);if(!e)return[];const a=JSON.parse(e);return Array.isArray(a)?a:[]}catch(e){return[]}}();if(h.length>=5)return void alert("Maksimum 5 alamat saja. Hapus salah satu jika ingin menambah lagi.");u.isDefault&&h.forEach((e=>e.isDefault=!1)),h.push(u),function(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){console.error("Failed to write addresses to localStorage",e)}}(h);const f=`${n}\n${r}\n${s}`,g=new URLSearchParams(window.location.search).get("from"),v="signup"===g;if("checkout"===g){try{localStorage.setItem("checkoutRecipientDraft_v1",f)}catch(e){}window.location.href="cekout.html"}else window.location.href=v?"Home.html":"drafamt.html"}))}));