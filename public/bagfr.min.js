// @ts-nocheck
!function(){"use strict";function t(t){return"Rp "+(t=Math.round(Number(t)||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function e(e){const r=parseInt(e.dataset.price,10)||0,n=r*(parseInt(e.querySelector(".qty").textContent,10)||0),a=e.querySelector(".item-sub-value");a&&(a.textContent=t(n));const i=e.querySelector(".item-meta");i&&(i.textContent=i.textContent.replace(/Rp\s?[\d\.]+/,t(r)))}function r(){const e=document.querySelectorAll(".cart-item");let r=0;e.forEach((t=>{const e=parseInt(t.dataset.price,10)||0,n=parseInt(t.querySelector(".qty").textContent,10)||0;r+=e*n}));const n=document.querySelector(".summary-value");n&&(n.textContent=t(r))}function n(t){const n=t.querySelector(".qty-increase"),a=t.querySelector(".qty-decrease"),i=t.querySelector(".qty");if(!i)return;e(t),n&&n.addEventListener("click",(()=>{let n=parseInt(i.textContent,10)||0;n+=1,i.textContent=n,e(t),r()})),a&&a.addEventListener("click",(()=>{let n=parseInt(i.textContent,10)||0;n>1&&(n-=1,i.textContent=n,e(t),r())}));const c=t.querySelector(".remove");c&&c.addEventListener("click",(()=>{confirm("Hapus item dari keranjang?")&&(t.remove(),r())}))}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".cart-item").forEach(n),r(),document.querySelectorAll(".like-heart").forEach((t=>{t.hasAttribute("aria-pressed")||t.setAttribute("aria-pressed","false"),t.addEventListener("click",(()=>{const e="true"===t.getAttribute("aria-pressed");t.setAttribute("aria-pressed",String(!e)),t.animate([{transform:"scale(1)"},{transform:"scale(1.12)"},{transform:"scale(1)"}],{duration:220,easing:"cubic-bezier(.2,.8,.2,1)"})})),t.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t.click())}))})),function(){const t=document.querySelector(".gift-toggle");t&&(t.hasAttribute("aria-pressed")||t.setAttribute("aria-pressed","false"),t.addEventListener("click",(()=>{const e="true"===t.getAttribute("aria-pressed");t.setAttribute("aria-pressed",String(!e))})))}()})),function(){const t=t=>document.querySelector(t),e=t=>"Rp "+new Intl.NumberFormat("id-ID").format(Number(t||0));function r(){try{return JSON.parse(localStorage.getItem("cart")||"[]")}catch(t){return[]}}function n(){const n=r(),a=document.getElementById("bag-items")||document.querySelector(".bag-items")||t(".cart-list");if(!a)return;if(a.innerHTML="",!n.length){a.innerHTML='<p class="empty">Your bag is empty.</p>';const r=t("#bag-total")||t(".bag-total");return void(r&&(r.textContent=e(0)))}let i=0;n.forEach(((t,r)=>{i+=Number(t.subtotal||0);const n=(t.addons||[]).map((t=>`${t.label} (+${e(t.price)})`)).join("<br>"),c=`\n        <div class="cart-item" data-idx="${r}">\n          <img src="${t.image||""}" alt="${t.title||""}" class="cart-thumb" style="width:72px;height:72px;object-fit:cover;border-radius:8px;margin-right:12px;">\n          <div class="cart-meta" style="flex:1">\n            <div class="cart-title" style="font-weight:600">${t.title}</div>\n            <div class="cart-addons" style="font-size:13px;color:#666">${n}</div>\n            <div class="cart-qty" style="margin-top:6px;">\n              <button class="qty-decr">-</button>\n              <span class="qty-val" style="margin:0 8px">${t.qty}</span>\n              <button class="qty-incr">+</button>\n            </div>\n          </div>\n          <div class="cart-price" style="min-width:96px;text-align:right">${e(t.subtotal)}</div>\n          \x3c!-- remove icon placed visually above price --\x3e\n<img src="acs/smph.png"\n     alt="Remove"\n     class="remove-icon"\n     title="Remove item"\n     style="width:24px;height:24px;cursor:pointer;margin-left:8px" />\n        </div>\n      `,s=document.createElement("div");s.innerHTML=c;const o=s.firstElementChild;o.style.display="flex",o.style.alignItems="center",a.appendChild(o)}));const c=t("#bag-total")||t(".bag-total");c&&(c.textContent=e(i))}document.addEventListener("click",(function(t){const e=t.target.closest(".cart-item");if(!e)return;const a=Number(e.dataset.idx);let i=r();return t.target.matches(".qty-incr")?(i[a].qty=Number(i[a].qty||1)+1,i[a].subtotal=Number(i[a].unitPrice||0)*i[a].qty,localStorage.setItem("cart",JSON.stringify(i)),void n()):t.target.matches(".qty-decr")?(i[a].qty=Math.max(1,Number(i[a].qty||1)-1),i[a].subtotal=Number(i[a].unitPrice||0)*i[a].qty,localStorage.setItem("cart",JSON.stringify(i)),void n()):t.target.matches(".remove-item")||t.target.closest(".remove-icon")?(i.splice(a,1),localStorage.setItem("cart",JSON.stringify(i)),void n()):void 0})),document.addEventListener("DOMContentLoaded",n),window.renderCart=n}()}();