// @ts-nocheck
!function(){"use strict";function t(t){return"Rp "+(t=Math.round(Number(t)||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function e(e){const n=parseInt(e.dataset.price,10)||0,r=n*(parseInt(e.querySelector(".qty").textContent,10)||0),a=e.querySelector(".item-sub-value");a&&(a.textContent=t(r));const i=e.querySelector(".item-meta");i&&(i.textContent=i.textContent.replace(/Rp\s?[\d\.]+/,t(n)))}function n(){const e=document.querySelectorAll(".cart-item");let n=0;e.forEach((t=>{const e=parseInt(t.dataset.price,10)||0,r=parseInt(t.querySelector(".qty").textContent,10)||0;n+=e*r}));const r=document.querySelector(".summary-value");r&&(r.textContent=t(n))}function r(t){const r=t.querySelector(".qty-increase"),a=t.querySelector(".qty-decrease"),i=t.querySelector(".qty");if(!i)return;e(t),r&&r.addEventListener("click",(()=>{let r=parseInt(i.textContent,10)||0;r+=1,i.textContent=r,e(t),n()})),a&&a.addEventListener("click",(()=>{let r=parseInt(i.textContent,10)||0;r>1&&(r-=1,i.textContent=r,e(t),n())}));const c=t.querySelector(".remove");c&&c.addEventListener("click",(()=>{confirm("Hapus item dari keranjang?")&&(t.remove(),n())}))}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".cart-item").forEach(r),n(),document.querySelectorAll(".like-heart").forEach((t=>{t.hasAttribute("aria-pressed")||t.setAttribute("aria-pressed","false"),t.addEventListener("click",(()=>{const e="true"===t.getAttribute("aria-pressed");t.setAttribute("aria-pressed",String(!e)),t.animate([{transform:"scale(1)"},{transform:"scale(1.12)"},{transform:"scale(1)"}],{duration:220,easing:"cubic-bezier(.2,.8,.2,1)"})})),t.addEventListener("keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t.click())}))})),function(){const t=document.querySelector(".gift-toggle");t&&(t.hasAttribute("aria-pressed")||t.setAttribute("aria-pressed","false"),t.addEventListener("click",(()=>{const e="true"===t.getAttribute("aria-pressed");t.setAttribute("aria-pressed",String(!e))})))}()})),function(){const t=t=>"Rp "+new Intl.NumberFormat("id-ID").format(Number(t||0));function e(){try{return JSON.parse(localStorage.getItem("cart")||"[]")}catch(t){return[]}}function n(){const n=e(),r=document.getElementById("bag-items")||document.querySelector(".bag-items")||document.querySelector(".cart-list");if(!r)return;if(r.innerHTML="",!n.length){r.innerHTML='<p class="empty" style="text-align:center;color:#666;padding:18px 0">Keranjang kosong.</p>';const e=document.getElementById("bag-total")||document.querySelector(".bag-total");return void(e&&(e.textContent=t(0)))}let a=0;n.forEach(((e,n)=>{a+=Number(e.subtotal||0);const i=(e.addons||[]).map((e=>`${e.label} (+${t(e.price)})`)).join("<br>"),c=`\n      <article class="cart-item" data-idx="${n}" data-price="${Number(e.unitPrice||e.price||0)}">\n        <img class="thumb" src="${e.image||""}" alt="${e.title||""}">\n        <div class="item-body">\n          <div class="item-head">\n            <div>\n              <div class="item-title">${e.title}</div>\n              <div class="item-meta">${i}</div>\n            </div>\n            \x3c!-- remove goes in item-head but visually we will place it above subtotal using CSS --\x3e\n         <button class="remove-item remove" ...>\n  <img class="remove-icon" src="acs/smph.png" />\n</button>\n\n          </div>\n\n          <div class="item-controls">\n            <div class="qty-control">\n              <button class="qty-btn qty-decr" aria-label="Kurangi">-</button>\n              <span class="qty">${e.qty}</span>\n              <button class="qty-btn qty-incr" aria-label="Tambah">+</button>\n            </div>\n\n            <div class="right-col">\n              <div class="item-sub">${t(e.subtotal)}</div>\n            </div>\n          </div>\n        </div>\n      </article>\n    `,o=document.createElement("div");o.innerHTML=c.trim(),r.appendChild(o.firstElementChild)}));const i=document.getElementById("bag-total")||document.querySelector(".bag-total");i&&(i.textContent=t(a))}document.addEventListener("click",(function(t){const r=t.target.closest(".cart-item");if(!r)return;const a=Number(r.dataset.idx);let i=e();return t.target.matches(".qty-incr")?(i[a].qty=Number(i[a].qty||1)+1,i[a].subtotal=Number(i[a].unitPrice||0)*i[a].qty,localStorage.setItem("cart",JSON.stringify(i)),void n()):t.target.matches(".qty-decr")?(i[a].qty=Math.max(1,Number(i[a].qty||1)-1),i[a].subtotal=Number(i[a].unitPrice||0)*i[a].qty,localStorage.setItem("cart",JSON.stringify(i)),void n()):t.target.matches(".remove-item")||t.target.closest(".remove-icon")?(i.splice(a,1),localStorage.setItem("cart",JSON.stringify(i)),void n()):void 0})),document.addEventListener("DOMContentLoaded",n),window.renderCart=n}()}();