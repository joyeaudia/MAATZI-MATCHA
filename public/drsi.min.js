// @ts-nocheck
!async function(){"use strict";const t=t=>document.querySelector(t),e=t=>"Rp "+new Intl.NumberFormat("id-ID").format(Number(t)||0),n=t=>Number(String(t||"").replace(/[^\d]/g,""))||0;try{const n=new URLSearchParams(location.search).get("id");if(n){const o=(await async function(){const t=["drsi.json","dsri.json","products.json","/drsi.json","/products.json","/dsri.json"];for(const e of t)try{const t=await fetch(e,{cache:"no-store"});if(!t.ok)continue;const n=await t.json();if(Array.isArray(n))return n}catch(t){}throw new Error("products file not found (tried drsi.json/products.json)")}()).find((t=>t.id===n));if(o){const n=t(".product-name"),r=t(".product-subtitle"),i=t("#product-price"),a=t(".product-image"),c=t("#detail-desc");n&&(n.textContent=o.title||"",n.dataset.id=o.id),r&&(r.textContent=o.subtitle||""),i&&(i.dataset.base=o.price||0,i.textContent=e(o.price||0),i.setAttribute("aria-live","polite"),window.productBasePrice=Number(o.price||0)),a&&(a.tagName&&"img"===a.tagName.toLowerCase()?(a.src=o.images&&o.images[0]||"",a.alt=o.title||""):a.innerHTML=`<img src="${o.images&&o.images[0]||""}" alt="${o.title||""}" />`),c&&(Array.isArray(o.description)?c.innerHTML=o.description.join("<br><br>"):c.innerHTML=o.description||""),"function"==typeof window.initOptionButtons&&window.initOptionButtons(),"function"==typeof window.updatePriceFromUI&&window.updatePriceFromUI()}else console.error("Product not found for id:",n)}else console.error("No product id in URL (use ?id=product-id)")}catch(t){console.error("Error loading product:",t)}!function(){const o=t("#product-price"),r=n(o?.dataset.base||window.productBasePrice||0);function i(t){const e=t.dataset.price??t.dataset.priceDelta??t.getAttribute("data-price-delta");return n(e)}function a(){let t=r;const n=document.querySelector('.option-group[data-key="milk"] button[aria-pressed="true"]');n&&(t+=i(n)),document.querySelectorAll('.option-group[data-key="addons"] button[aria-pressed="true"]').forEach((e=>{t+=i(e)})),o&&(o.textContent=e(t));const a=document.getElementById("price-display");a&&(a.textContent=e(t))}document.querySelectorAll(".option-group").forEach((t=>{const e=Array.from(t.querySelectorAll("button")),n="addons"===t.dataset.key;e.forEach((t=>{t.hasAttribute("aria-pressed")||t.setAttribute("aria-pressed","false"),t.addEventListener("click",(()=>{if(n){const e="true"===t.getAttribute("aria-pressed");t.setAttribute("aria-pressed",(!e).toString())}else e.forEach((t=>t.setAttribute("aria-pressed","false"))),t.setAttribute("aria-pressed","true");a()})),t.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),t.click())}))}))})),window.updatePriceFromUI=a,window.initOptionButtons=function(){},setTimeout(a,40)}()}(),function(){const t=document.getElementById("share-btn"),e=document.getElementById("share-menu"),n=document.getElementById("share-toast"),o=document.getElementById("share-close");if(!t||!e)return;const r=window.location.href;function i(){e.style.display="none",e.setAttribute("aria-hidden","true")}function a(t="Link copied!"){n&&(n.textContent=t,n.hidden=!1,setTimeout((()=>n.hidden=!0),1600))}t.addEventListener("click",(t=>{t.stopPropagation(),e.style.display="block",e.setAttribute("aria-hidden","false")})),o?.addEventListener("click",i),e.addEventListener("click",(t=>{const e=t.target.getAttribute("data-action");e&&("copy"===e&&async function(){try{await navigator.clipboard.writeText(r),a("Link disalin ke clipboard")}catch(t){const e=document.createElement("textarea");e.value=r,document.body.appendChild(e),e.select();try{document.execCommand("copy"),a("Link disalin ke clipboard")}catch(t){alert("Copy failed. Link: "+r)}document.body.removeChild(e)}i()}(),"native"===e&&async function(){if(navigator.share)try{await navigator.share({title:document.title||"Check this product",text:"Lihat produk ini:",url:r})}catch(t){}else{const t="https://api.whatsapp.com/send?text="+encodeURIComponent(r);window.open(t,"_blank")}i()}())})),document.addEventListener("click",(n=>{e.contains(n.target)||n.target===t||i()}))}();